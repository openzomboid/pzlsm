# Delfile
PZLSM позволяет удалять некоторые файлы игры для выполнения частичных вайпов или исправления некоторых бавгов.

Команда `delfile` принимает следующие команды и аргументы:

## Аргументы

* `--help` - Выводит помощь по команде.

## Команды
Команду `delfile` невозможно вызвать без одной из следующих подкоманд:

* `manifest` - Удаляет файл `appworkshop_108600.acf`. Иногда при обновлении мода в мастерской PZ не замечает этого и не обновляет мод при запуске сервера. Удаление файла манифеста позволяет выполнить принудительное обновление модов из мастерской Steam во время запуска сервера.

      ./server.sh delfile manifest

* `zombies` - Удаляет все файлы `zpop_*_*.bin` из папки `Zomboid/Saves/Multiplayer/servername`. Это удаляет всех зомби с карты мира. Рекомендуется вызывать на выключенном сервере. Запуск на запущенном сервере возможен, но удаление всех зомби не гарантируется.

    > FIXME: Сервер достаточно быстро восстанавливает всех зомби, буд-то бы зомби не удалялись. В таком виде команда бесполезна и, возможно, даже вредна. Восстановление зомби происходит массово по всем прогруженным чанкам и возможны заметные пролаги. Требуется переосмысление команды и поиск другого способа удаления зомби.

      ./server.sh delfile zombies

* `gos` - Удаляет все файлы `gos_*.bin` из папки `Zomboid/Saves/Multiplayer/servername`. Это сбрасывает некоторую метаинформацию о мире, такую как время роста урожая, установки ловушек и прочее. Рекомендуется вызывать на выключенном сервере. Запуск на запущенном сервере возможен, но результат не гарантируется.

      ./server.sh delfile gos

* `isoregiondata` - Удаляет всю папку `isoregiondata` из папки `Zomboid/Saves/Multiplayer/servername`. Это сбрасывает некоторую метаинформацию о состоянии построенных игроками конструкций. В частности сбрасываются все сформированные комнаты - в построенных игроками домах будет идти дождь до переформирования комнаты. Рекомендуется вызывать на выключенном сервере. Запуск на запущенном сервере возможен, но результат не гарантируется.

      ./server.sh isoregiondata gos

* `map {top} {bottom}` - Удаляет файлы `map_*_*.bin` из папки `Zomboid/Saves/Multiplayer/servername`. Это удаляет область карты. Берутся координаты от верхней правой до нижней левой точки, строится прямоугольник между ними и удаляется все, что туда попало.
  * `top` - верхняя правая XY координата с символом 'x' в качестве разделителя. Например, 10626x10600.
  * `bottom` - левая нижняя XY координата с символом 'x' в качестве разделителя. Например, 10679x10661.

  ```bash
  ./server.sh delfile map 10626x10600 10679x10661
  ```
