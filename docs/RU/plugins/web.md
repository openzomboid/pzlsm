# Web
В PZLSM предоставлен плагин `web`, позволяющий расшарить некоторые игровые файлы через интернет. В этом же плагине устанавливается мониторинг Munin.
> Возможно в будущих обновлениях мониторинг Munin будет перенесен в другой плагин. Но пока он находится здесь, потому что в нем поддерживается отдача страницы с графиками по чети через Nginx.

## Глобальные опции
* `--help` - Выводит помощь по команде.

## Команды

### Install
Команда `web install` устанавливает nginx, certbot (TODO) и настраивает доступ к публичной папке `public` в корневой папке `pz1`. Здесь же происходит и установка мониторинга munin.

#### Использование

    ./server.sh web install

### Enable
Команда `web enable` включает доступ к файлам через web.

#### Опции
* `--domain|-d` - Указать домен, по которому будут доступны некоторые файлы игры. Вы должны владеть этим доменом и прописать A записи у регистратора.
* `--username|-u` - Указать имя пользователя, которому будут доступны файлы.
* `--password|-p` - Указать пароль для пользователя.

#### Использование

    ./server.sh web enable
    ./server.sh web enable -d myserver.com
    ./server.sh web enable -u outdead -p jH84jHgd

После включения этой опции можно ввести в адресную строку браузера ip сервера (или домен, если вы указали его в переменной --domain) и увидеть в ней все файлы, расположенные в директории `public`.

### Disable
Команда `web disable` отключает доступ к файлам через web.

#### Опции
* `--domain|-d` - Указать домен, который нужно отключить, если он был включен ранее.

#### Использование

    ./server.sh web disable
    ./server.sh web disable -d myserver.com

## Munin
По умолчанию мониторинг Munin не устанавливается. Для того чтобы команда `web install` его установила, а `web enable` подключила, нужно указать в конфиге переменную `ENABLE_MUNIN` в значение true.

    ENABLE_MUNIN="true"

После чего команды `web install` и `web enable` нужно будет вызвать повторно. 

Если установка прошла успешно, то вы можете дописать `/munin` к адресу, по которому включен доступ к файлам игры и увидеть графики мониторинга. Например:

    http://127.0.0.1/munin
    http://myserver.com/munin
